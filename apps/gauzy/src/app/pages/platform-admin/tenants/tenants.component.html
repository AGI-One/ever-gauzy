<div class="tenants-container">
	<!-- Header with Actions -->
	<div class="header-section">
		<div class="header-content">
			<h3>{{ 'PLATFORM_ADMIN.TENANTS.TITLE' | translate }}</h3>
			<p class="text-muted">{{ 'PLATFORM_ADMIN.TENANTS.SUBTITLE' | translate }}</p>
		</div>
		<div class="header-actions">
			<button nbButton status="primary" size="medium" (click)="createTenant()">
				<nb-icon icon="plus-outline"></nb-icon>
				{{ 'PLATFORM_ADMIN.TENANTS.CREATE_TENANT' | translate }}
			</button>
		</div>
	</div>

	<!-- Search and Filter -->
	<nb-card class="search-card">
		<nb-card-body>
			<div class="search-section">
				<input
					nbInput
					fullWidth
					type="text"
					[(ngModel)]="searchTerm"
					(ngModelChange)="onSearch($event)"
					[placeholder]="'PLATFORM_ADMIN.TENANTS.SEARCH_PLACEHOLDER' | translate"
				/>
				<button
					nbButton
					status="basic"
					size="medium"
					nbTooltip="{{ 'PLATFORM_ADMIN.TENANTS.REFRESH' | translate }}"
					(click)="refresh()"
				>
					<nb-icon icon="refresh-outline"></nb-icon>
				</button>
			</div>
		</nb-card-body>
	</nb-card>

	<!-- Loading Spinner -->
	<nb-card *ngIf="loading">
		<nb-card-body class="text-center">
			<nb-spinner size="large" status="primary"></nb-spinner>
		</nb-card-body>
	</nb-card>

	<!-- Tenants Table -->
	<nb-card *ngIf="!loading">
		<nb-card-body class="table-container">
			<!-- Empty State -->
			<div *ngIf="filteredTenants.length === 0" class="empty-state">
				<nb-icon icon="inbox-outline" class="empty-icon"></nb-icon>
				<h5>{{ 'PLATFORM_ADMIN.TENANTS.NO_TENANTS' | translate }}</h5>
				<p class="text-muted">
					{{
						searchTerm
							? ('PLATFORM_ADMIN.TENANTS.NO_SEARCH_RESULTS' | translate)
							: ('PLATFORM_ADMIN.TENANTS.CREATE_FIRST_TENANT' | translate)
					}}
				</p>
			</div>

			<!-- Table -->
			<table *ngIf="filteredTenants.length > 0" class="tenants-table">
				<thead>
					<tr>
						<th>{{ 'PLATFORM_ADMIN.TENANTS.TABLE.NAME' | translate }}</th>
						<th>{{ 'PLATFORM_ADMIN.TENANTS.TABLE.STATUS' | translate }}</th>
						<th>{{ 'PLATFORM_ADMIN.TENANTS.TABLE.USERS' | translate }}</th>
						<th>{{ 'PLATFORM_ADMIN.TENANTS.TABLE.ORGANIZATIONS' | translate }}</th>
						<th>{{ 'PLATFORM_ADMIN.TENANTS.TABLE.EXPIRES' | translate }}</th>
						<th>{{ 'PLATFORM_ADMIN.TENANTS.TABLE.ACTIONS' | translate }}</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let tenant of filteredTenants" class="tenant-row" (click)="viewTenant(tenant)">
						<td>
							<div class="tenant-name">
								<img
									*ngIf="tenant.logo"
									[src]="tenant.logo"
									[alt]="tenant.name"
									class="tenant-logo"
								/>
								<div class="tenant-logo-placeholder" *ngIf="!tenant.logo">
									{{ tenant.name?.charAt(0)?.toUpperCase() }}
								</div>
								<span>{{ tenant.name }}</span>
							</div>
						</td>
						<td>
							<nb-badge [status]="getStatusBadge(tenant)" [text]="getStatusText(tenant)"></nb-badge>
						</td>
						<td>
							<span class="stat-value">{{ tenant.stats?.userCount || 0 }}</span>
						</td>
						<td>
							<span class="stat-value">{{ tenant.stats?.organizationCount || 0 }}</span>
						</td>
						<td>
							<span *ngIf="tenant.expiresAt">
								{{ tenant.expiresAt | date : 'short' }}
								<span *ngIf="tenant.daysUntilExpiration !== undefined" class="text-muted">
									({{ tenant.daysUntilExpiration }} days)
								</span>
							</span>
							<span *ngIf="!tenant.expiresAt" class="text-muted">-</span>
						</td>
						<td>
							<div class="action-buttons">
								<button
									nbButton
									status="info"
									size="small"
									nbTooltip="{{ 'PLATFORM_ADMIN.TENANTS.ACTIONS.VIEW' | translate }}"
									(click)="viewTenant(tenant)"
								>
									<nb-icon icon="eye-outline"></nb-icon>
								</button>
								<button
									nbButton
									status="primary"
									size="small"
									nbTooltip="{{ 'PLATFORM_ADMIN.TENANTS.ACTIONS.EDIT' | translate }}"
									(click)="editTenant($event, tenant)"
								>
									<nb-icon icon="edit-outline"></nb-icon>
								</button>
								<button
									nbButton
									status="danger"
									size="small"
									nbTooltip="{{ 'PLATFORM_ADMIN.TENANTS.ACTIONS.DELETE' | translate }}"
									(click)="deleteTenant($event, tenant)"
								>
									<nb-icon icon="trash-2-outline"></nb-icon>
								</button>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</nb-card-body>
	</nb-card>
</div>
